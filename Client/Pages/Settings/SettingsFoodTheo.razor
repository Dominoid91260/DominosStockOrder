@page "/Settings/FoodTheo"
@using DominosStockOrder.Client.Components
@using DominosStockOrder.Client.Services
@using DominosStockOrder.Shared.ViewModels
@inject SettingsService Settings
@inject HttpClient Http

<PageTitle>Settings | Items</PageTitle>

<div class="d-flex">
    <SettingsNavComponent/>

    <div class="container mb-3">
        <div class="row">
            <div class="col">Number of Weeks of Food Theo</div>
            <div class="col"><input type="text" inputmode="numeric" class="form-control" @bind="@Settings.NumFoodTheoWeeks"/> </div>
        </div>

        <button class="btn btn-primary mt-3" @onclick="SaveChanges">Save Changes</button>
    </div>
</div>

@code {
    private async Task SaveChanges()
    {
        var vm = new SettingsVM
        {
            NumFoodTheoWeeks = Settings.NumFoodTheoWeeks
        };

        await Http.PutAsJsonAsync("/api/Settings", vm);
    }
}
